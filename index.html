<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Asteroid Shooter - Kitten Ship</title>
<style>
  body { margin: 0; overflow: hidden; background: black; }
  canvas { display: block; }
</style>
</head>
<body>
<canvas id="game"></canvas>
<script>
const canvas = document.getElementById('game');
const ctx = canvas.getContext('2d');
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const keys = {};
document.addEventListener('keydown', e => keys[e.key] = true);
document.addEventListener('keyup', e => keys[e.key] = false);

// Load images
const idleImg = new Image();
idleImg.src = "https://us.images.westend61.de/0000465443pw/face-of-tabby-kitten-felis-silvestris-catus-with-blue-eyes-MJOF000870.jpg"; // Replace with kitten idle URL
const shootImg = new Image();
shootImg.src = "https://media.istockphoto.com/id/485809640/photo/cute-tabby-kitten.jpg?s=612x612&w=0&k=20&c=m0sUc4IpG1rOVs3Oyzex_tfsphPSWhBIKGVf2TZj9w4="; // Replace with kitten shooting URL

class Player {
  constructor() {
    this.x = canvas.width / 2;
    this.y = canvas.height / 2;
    this.angle = 0;
    this.velX = 0;
    this.velY = 0;
    this.radius = 20;
    this.shootTime = 0; // timestamp when last shot
    this.shootDuration = 100000; // 0.5 seconds
  }
  update() {
    if(keys['ArrowLeft']) this.angle -= 0.05;
    if(keys['ArrowRight']) this.angle += 0.05;
    if(keys['ArrowUp']) {
      this.velX += Math.cos(this.angle) * 0.1;
      this.velY += Math.sin(this.angle) * 0.1;
    }
    this.x += this.velX;
    this.y += this.velY;
    this.velX *= 0.99;
    this.velY *= 0.99;

    // Screen wrap
    if(this.x < 0) this.x = canvas.width;
    if(this.x > canvas.width) this.x = 0;
    if(this.y < 0) this.y = canvas.height;
    if(this.y > canvas.height) this.y = 0;
  }
  draw() {
    ctx.save();
    ctx.translate(this.x, this.y);
    ctx.rotate(this.angle);
    const now = Date.now();
    const img = (now - this.shootTime < this.shootDuration) ? shootImg : idleImg;
    const size = 50; // ship size
    ctx.drawImage(img, -size/2, -size/2, size, size);
    ctx.restore();
  }
}

class Bullet {
  constructor(x,y,angle) {
    this.x = x;
    this.y = y;
    this.angle = angle;
    this.speed = 8;
    this.radius = 2;
  }
  update() {
    this.x += Math.cos(this.angle)*this.speed;
    this.y += Math.sin(this.angle)*this.speed;
  }
  draw() {
    ctx.fillStyle='white';
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.radius,0,Math.PI*2);
    ctx.fill();
  }
}

class Asteroid {
  constructor(x,y,size){
    this.x=x;
    this.y=y;
    this.size=size;
    this.angle=Math.random()*Math.PI*2;
    this.speed=1+Math.random()*2;
    this.velX=Math.cos(this.angle)*this.speed;
    this.velY=Math.sin(this.angle)*this.speed;
  }
  update(){
    this.x+=this.velX;
    this.y+=this.velY;
    if(this.x<0) this.x=canvas.width;
    if(this.x>canvas.width) this.x=0;
    if(this.y<0) this.y=canvas.height;
    if(this.y>canvas.height) this.y=0;
  }
  draw(){
    ctx.strokeStyle='white';
    ctx.beginPath();
    ctx.arc(this.x,this.y,this.size,0,Math.PI*2);
    ctx.stroke();
  }
}

const player = new Player();
const bullets = [];
const asteroids = [];

for(let i=0;i<5;i++){
  asteroids.push(new Asteroid(Math.random()*canvas.width,Math.random()*canvas.height,50));
}

function spawnAsteroid(x,y,size){
  const newSize = size/2;
  if(newSize>10){
    asteroids.push(new Asteroid(x,y,newSize));
    asteroids.push(new Asteroid(x,y,newSize));
  }
}

// Shooting bullets
document.addEventListener('keydown', e=>{
  if(e.key===' '){
    bullets.push(new Bullet(player.x, player.y, player.angle));
    player.shootTime = Date.now(); // shooting image shows for 0.5 sec
  }
});

function distance(a,b){
  return Math.hypot(a.x-b.x,a.y-b.y);
}

function gameLoop(){
  ctx.fillStyle='black';
  ctx.fillRect(0,0,canvas.width,canvas.height);

  player.update();
  player.draw();

  bullets.forEach((b,i)=>{
    b.update();
    b.draw();
    if(b.x<0||b.x>canvas.width||b.y<0||b.y>canvas.height) bullets.splice(i,1);
  });

  asteroids.forEach((a,ai)=>{
    a.update();
    a.draw();
    bullets.forEach((b,bi)=>{
      if(distance(a,b)<a.size+b.radius){
        bullets.splice(bi,1);
        asteroids.splice(ai,1);
        spawnAsteroid(a.x,a.y,a.size);
      }
    });
    if(distance(a,player)<a.size+player.radius){
      console.log('Hit!');
    }
  });

  requestAnimationFrame(gameLoop);
}

gameLoop();
</script>
</body>
</html>

document.write(`
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Color-Chaser Snake</title>
<style>
  html,body{margin:0;padding:0;height:100%;background:#000;color:#fff;font-family:sans-serif;display:flex;justify-content:center;align-items:center}
  canvas{background:#111;border:2px solid #fff;border-radius:8px;display:block}
  #scoreboard{position:absolute;top:10px;left:50%;transform:translateX(-50%);font-size:18px;opacity:0.9}
</style>
</head>
<body>
<div id="scoreboard">Score: 0</div>
<canvas id="game" width="400" height="400"></canvas>
<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');
  const scoreEl = document.getElementById('scoreboard');
  const CELL = 20;
  const COLS = canvas.width / CELL;
  const ROWS = canvas.height / CELL;
  const COLORS = ['red','green','blue','yellow','cyan','magenta'];
  let snake = [{x:10,y:10,color:'red'}];
  let dir = {x:1,y:0};
  let nextDir = dir;
  let food = {x:5,y:5,color:COLORS[Math.floor(Math.random()*COLORS.length)]};
  let score = 0;
  let invincible = false;
  let invTimer = 0;

  function randPos(){
    return {x:Math.floor(Math.random()*COLS),y:Math.floor(Math.random()*ROWS)};
  }

  function placeFood(){
    let p;
    do { p = randPos(); } while(snake.some(s=>s.x===p.x && s.y===p.y));
    food = {...p, color: COLORS[Math.floor(Math.random()*COLORS.length)]};
  }

  function tick(){
    dir = nextDir;
    const head = {x: snake[0].x + dir.x, y: snake[0].y + dir.y, color: snake[0].color};

    // wrap-around
    head.x = (head.x + COLS) % COLS;
    head.y = (head.y + ROWS) % ROWS;

    // self-collision
    if(!invincible && snake.some(s=>s.x===head.x && s.y===head.y)){ snake = [{x:10,y:10,color:'red'}]; score=0; invincible=false; }

    snake.unshift(head);

    // food logic
    if(head.x===food.x && head.y===food.y){
      if(head.color === food.color){
        score += 10;
        // change snake head color to food color
        snake[0].color = food.color;
      } else {
        score = Math.max(0, score-5);
        snake.pop();
      }
      // 10% chance golden food
      if(Math.random()<0.1){
        invincible = true;
        invTimer = 50;
      }
      placeFood();
    } else snake.pop();

    if(invincible){
      invTimer--;
      if(invTimer<=0) invincible=false;
    }

    scoreEl.textContent = 'Score: '+score;
  }

  function draw(){
    ctx.fillStyle='#000'; ctx.fillRect(0,0,canvas.width,canvas.height);

    // draw food
    ctx.fillStyle = invincible ? 'gold':'#'+food.color; 
    ctx.fillRect(food.x*CELL,food.y*CELL,CELL,CELL);
    
    // draw snake
    snake.forEach((s,i)=>{
      let grad = ctx.createLinearGradient(s.x*CELL,s.y*CELL,(s.x+1)*CELL,(s.y+1)*CELL);
      grad.addColorStop(0,s.color);
      grad.addColorStop(1,'white');
      ctx.fillStyle = grad;
      ctx.fillRect(s.x*CELL,s.y*CELL,CELL,CELL);
    });
  }

  window.addEventListener('keydown', e=>{
    if(e.key==='ArrowUp' && dir.y!==1) nextDir={x:0,y:-1};
    if(e.key==='ArrowDown' && dir.y!==-1) nextDir={x:0,y:1};
    if(e.key==='ArrowLeft' && dir.x!==1) nextDir={x:-1,y:0};
    if(e.key==='ArrowRight' && dir.x!==-1) nextDir={x:1,y:0};
  });

  function loop(){
    tick();
    draw();
    setTimeout(loop,120);
  }

  loop();
})();
</script>
</body>
</html>
`);
